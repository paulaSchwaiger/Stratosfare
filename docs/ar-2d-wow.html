<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <title>Stratosfare - Version 2</title>
    <link rel="icon" type="image/x-icon" href="/docs/sources/stratosfare-triangle.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

    <link rel="stylesheet" href="style.css" />
 
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.5/aframe/build/aframe-ar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.loaders.min.js"></script>
    
  </head>

  <body class="page-ar">
    <!-- HEADER -->
    <header id="main-header">
      <div class="header-left">
        <img
          src="sources/stratosfare-logo.svg"
          alt="Stratosfare Logo"
          class="logo-img"
        />
      </div>

      <button class="menu-toggle" aria-label="Menü öffnen">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </header>

    <!-- Kamera-Erlaubnis-Overlay (unser eigener Dialog) -->
    <div id="permission-overlay">
      <div class="permission-dialog">
        <h2>Kamera Erlaubnis</h2>
        <p>
          Für die AR-Darstellung greift diese Anwendung auf die Kamera deines
          Geräts zu. Das Kamerabild wird nur lokal im Browser verarbeitet und
          nicht gespeichert.
        </p>
        <ul>
          <li>Nur zur Erkennung des AR-Markers (z. B. HIRO).</li>
          <li>Keine Übertragung an einen Server.</li>
          <li>Ohne Kamerazugriff kann die Anwendung nicht genutzt werden.</li>
        </ul>
        <div class="permission-actions">
          <button id="deny-btn" class="btn btn-secondary">Zurück</button>
          <button id="allow-btn" class="btn btn-primary">
            Zustimmen &amp; starten
          </button>
        </div>
      </div>
    </div>

    <!-- Loading für die AR-Szene -->
    <div id="loading" class="hidden">AR-Szene wird geladen…</div>

    <!-- AR-Bereich -->
    <div id="ar-wrapper">
      <div id="ar-root"></div>
    </div>

    <!-- Mission Text -->
    <div id="mission-overlay" class="mission-overlay hidden">
      <div class="mission-wrap" id="mission-wrap">
        <div class="mission-title" id="mission-title">MISSION 1</div>
        <div class="mission-sub" id="mission-sub">Tippe alle Pins an</div>
      </div>
    </div>

    <!--  MINIGAME -->
    <div id="minigame-overlay" class="minigame-overlay hidden">

    <div id="minigame-countdown" class="minigame-countdown hidden">
      <div id="minigame-countdown-number" class="minigame-countdown-number"></div>
    </div>

    <!-- Center Area -->
    <section class="minigame-stage">
      <div class="minigame-progress">
        <div id="minigame-progress-bar" class="minigame-progress-bar"></div>
      </div>

      <div class="minigame-time" id="minigame-time">5.0s</div>

      <div id="tap-box" class="tap-box is-disabled" role="button" aria-label="Tap here">
        <div class="tap-box-text">Tap here</div>
      </div>
    </section>
  </div>


    <!-- Countdown -->
    <div id="countdown-overlay" class="countdown-overlay hidden">
      <div id="countdown-number" class="countdown-number">3</div>
    </div>

    <!-- Info Overlay -->
    <div id="info-overlay" class="info-overlay hidden" role="dialog" aria-modal="true">
      <div class="info-card">
        <button id="info-close" class="info-close" aria-label="Overlay schließen">×</button>

        <img id="info-icon" class="info-icon" src="" alt="" />
        <h3 id="info-subtitle" class="info-subtitle"></h3>
        <p id="info-text2" class="info-text2">
          Text
        </p>
      </div>
    </div>

    <!-- FOOTER -->
    <footer id="ar-footer" class="ar-footer hidden">
      <!-- Progressbar bleibt ganz oben -->
      <div class="footer-progress">
        <div class="footer-progress-bar" id="footer-progress-bar"></div>
      </div>

      <!-- ===== VIEW: Mission 1 (Pins) ===== -->
      <div class="footer-view footer-view-pins" id="footer-view-pins">
        <button class="footer-cta" id="footer-btn-pins">MISSION ABSCHLIEßEN</button>
      </div>

      <!-- ===== VIEW: Mission 2 (Minigame) ===== -->
      <div class="footer-view footer-view-minigame hidden" id="footer-view-minigame">
        <div class="mg-row">
          <div class="mg-text">
            <div class="mg-status" id="mg-status">Erreiche das Tap-Ziel!</div>
            <div class="mg-meta">
              <span><span id="mg-taps">0</span>/<span id="mg-goal">30</span> Taps</span>
            </div>
          </div>
          <button class="footer-cta" id="mg-start-btn">START</button>
        </div>
      </div>

      <div class="footer-view footer-view-launch hidden" id="footer-view-launch">
  <button class="footer-cta" id="launch-btn">RAKETE STARTEN</button>
</div
    </footer>

    <!-- AR-Logik -->
    <script src="/docs/js/ar-2d-wow.js"></script>
  </body>
</html>